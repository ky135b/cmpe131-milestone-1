{% extends "base.html" %}
{% block content %}
<h1>Email Home Page </h1>
<style>
h1 {
  color: black;
  font-size: 200%;
}
h2 {
  color: black;
  font-size: 200%;
}
p {
  color: black;
  font-size: 100%%;
}
div.sending{
 background-color: #f2f2f2;
}
div.inbox {
  background-color: #f2f2f2;
  width: 600px;
  height: 120px;
  text-indent: 10px;
}
</style>
<form method="POST" action="/index" enctype="multipart/form-data" novalidate>
    {{form.hidden_tag()}}
    <p>{{ form.todo() }} </p>
    <a href="{{ url_for('groups') }}">View Email Groups</a>
    <div class="sending">
    <p> {{form.recipient.label}} <br>
       {{form.recipient(size=32)}}
    {%for error in form.recipient.errors%}
    <span style="color: red;"> [{{error}}]</span>
    {% endfor %}
    </p>

    <p> {{form.subject.label}} <br>
       {{form.subject(size=32)}}
    {%for error in form.subject.errors%}
    <span style="color: red;"> [{{error}}]</span>
    {% endfor %}
    </p>

    <p class = "body"> {{form.body.label}} <br>
       {{form.body(size=200)}}
    {%for error in form.body.errors%}
    <span style="color: red;"> [{{error}}]</span>
    {% endfor %}
    </p>
    <p>{{form.file.label}} {{form.file()}}</p>
  <br>
    <p>{{ form.send() }} </p>
    </div>

<h2>Inbox ({{emails.all()|length}})</h2>
<body>
{%if emails%}
        {%for email in emails%}
        <div class = "inbox">
        <p>From: {{ email.sender}}</p>
        <p>Subject: {{ email.subject}}</p>
        <p>Body: {{ email.body}}</p>
        {%if email.file%}
           <p><a href="download/{{ email.id }}">Attachment</a></p>
        {%else%}
          <p>no attachments</p>
        {%endif%}
        <p><a href="{{url_for('delEmail', id = email.id)}}">Delete Email</a></p>
        </div>
        {% endfor %}
{%else%}
    <p>You have currently have no emails<p>
{%endif%}
</body>
</form>
{% include "login_footer.html" %}
{% endblock %}
