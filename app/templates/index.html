{% extends "base.html" %}
{% block content %}
<h1>Email Home Page</h1>
<form method="POST" action="/index" enctype="multipart/form-data" novalidate>
    {{form.hidden_tag()}}
    <p>{{ form.todo() }} </p>

    <a href="{{ url_for('groups') }}">View Email Groups</a>
    <p> {{form.recipient.label}} <br>
       {{form.recipient(size=32)}}
    {%for error in form.recipient.errors%}
    <span style="color: red;"> [{{error}}]</span>
    {% endfor %}
    </p>

    <p> {{form.subject.label}} <br>
       {{form.subject(size=32)}}
    {%for error in form.subject.errors%}
    <span style="color: red;"> [{{error}}]</span>
    {% endfor %}
    </p>

    <p> {{form.body.label}} <br>
       {{form.body(size=200)}}
    {%for error in form.body.errors%}
    <span style="color: red;"> [{{error}}]</span>
    {% endfor %}
    </p>
    <p>{{form.file.label}} {{form.file()}}</p>
  <br>
    <p>{{ form.send() }} </p>


<h2>Inbox ({{emails.all()|length}})</h2>
<body>
{%if emails%}
        {%for email in emails%}
        <p>From:{{ email.sender}}</p>
        <p>Subject:{{ email.subject}}</p>
        <p>Body:{{ email.body}}</p>
        {%if email.file%}
           <p><a href="download/{{ email.id }}">Attachment</a></p>
        {%else%}
          <p>no attachments</p>
        {%endif%}
        <p><a href="{{url_for('delEmail', id = email.id)}}">Delete Email</a></p>
        {% endfor %}
{%else%}
    <p>You have currently have no emails<p>
{%endif%}
</body>
</form>
{% include "login_footer.html" %}
{% endblock %}
